"use strict";(self.webpackChunkmetapledefi=self.webpackChunkmetapledefi||[]).push([[323],{30323:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(15861),a=n(70885),s=n(87757),c=n.n(s),i=n(89426),u=n(72791),o=n(90279),l=n(77904),d=n(44253),p=n(75422),x=n(27459),f=function(e){var t=(0,d.y8)(),n=(0,x.d)().callWithGasPrice;return{onApprove:(0,u.useCallback)((0,r.Z)(c().mark((function r(){var a,s;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n(e,"approve",[t.address,p.Bz]);case 3:return a=r.sent,r.next=6,a.wait();case 6:return s=r.sent,r.abrupt("return",s.status);case 10:return r.prev=10,r.t0=r.catch(0),r.abrupt("return",!1);case 13:case"end":return r.stop()}}),r,null,[[0,10]])}))),[e,t,n])}},m=n(92635),v=n(92308),h=n(76454),b=n(79266),w=n(54385),k=n(46087),g=n(61540),Z=n(26483),y=n(94427),j=n(52697),S=n(84471),N=n(78235),C=n(86047),A=n(70316),B=n(65585),D=n(80184),F=RegExp("^\\d*(?:\\\\[.])?\\d*$");function U(e){var t,n=e.tokenSymbol,s=void 0===n?"":n,o=e.isMax,l=void 0!==o&&o,d=e.label,p=void 0===d?"":d,x=e.placeHolder,f=void 0===x?"":x,m=e.inputValue,v=void 0===m?"":m,h=e.onInputChange,b=void 0===h?null:h,w=e.onMax,U=void 0===w?null:w,M=e.selectedToken,L=e.tokenBalance,T=e.max,I=e.onConfirm,P=e.onDismiss,R=(0,C.Z)().account,E=(0,u.useState)(!1),V=(0,a.Z)(E,2),W=V[0],z=V[1],O=(0,u.useMemo)((function(){return(0,B.NJ)(T)}),[T]),_=new S.Z(v),H=new S.Z(O),K="0"===T||!T;return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(k.Z,{sx:{maxWidth:620},children:[(0,D.jsxs)(g.Z,{sx:{background:"#e7e9ec",margin:"5px",borderRadius:"inherit"},children:[(0,D.jsx)("div",{children:(0,D.jsxs)("p",{children:[M?"Balance: ".concat(null!==(t=function(e){try{var t=(0,B.U4)(e);return K?"0":t.gt(0)?t.toFixed(8,S.Z.ROUND_DOWN):t.toFixed(3,S.Z.ROUND_DOWN)}catch(n){(0,A.x2)(n.data?n.data.message:n.message)}}(L))&&void 0!==t?t:"Loading"," "):" - ",R&&l&&M&&(0,D.jsx)(Z.Z,{variant:"outlined",style:{marginLeft:"3px"},onClick:U,size:"small",children:"Max"})]})}),(0,D.jsx)("div",{style:{marginTop:"5px"},children:(0,D.jsxs)(i.ZP,{container:!0,spacing:1,children:[(0,D.jsx)(i.ZP,{item:!0,xs:8,md:8,children:(0,D.jsx)(y.Z,{inputMode:"decimal",step:"any",min:"0",type:"number",fullWidth:!0,value:parseFloat(v),variant:"filled",label:p,placeholder:f,title:p,onChange:function(e){var t;(""===(t=e.currentTarget.value.replace(/,/g,"."))||F.test((0,N.hr)(t)))&&b(t)}})}),(0,D.jsxs)(i.ZP,{item:!0,xs:4,md:4,style:{fontSize:"10px",display:"flex",alignItems:"center"},children:[(0,D.jsx)(Z.Z,{onClick:U,variant:"outlined",style:{marginRight:"5px"},children:"Max"}),s]})]})})]}),(0,D.jsx)(j.Z,{children:(0,D.jsx)(Z.Z,{variant:"contained",onClick:(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),e.prev=1,e.next=4,I(v);case 4:P(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),(0,A.x2)(e.t0.data?e.t0.data.message:e.t0.message);case 10:return e.prev=10,z(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])}))),fullWidth:!0,disabled:W||!_.isFinite()||_.eq(0)||_.gt(H),children:"Confirm"})})]})})}var M=n(67724),L=function(e){var t=(0,d.y8)(),n=(0,u.useCallback)(function(){var n=(0,r.Z)(c().mark((function n(r){var a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,M.AQ)(t,e,r);case 2:a=n.sent,console.info(a);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,e]);return{onStake:n}},T=function(e){var t=(0,d.y8)(),n=(0,u.useCallback)(function(){var n=(0,r.Z)(c().mark((function n(r){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,M.dU)(t,e,r);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,e]);return{onUnstake:n}},I=n(99533),P=function(e){var t=e.farm,n=e.tokenBalance,s=e.tokenName,i=e.pid,o=e.lpLabel,d=e.isUnstake,p=e.isDisabled,x=void 0!==p&&p,f=(0,u.useState)(!1),k=(0,a.Z)(f,2),g=k[0],Z=k[1],y=(0,u.useState)(!1),j=(0,a.Z)(y,2),S=j[0],N=j[1],F=L(i).onStake,M=T(i).onUnstake,P=(0,C.Z)().account,R=(0,l.TL)(),E=((0,I.w5)(s),(0,u.useMemo)((function(){return(0,B.NJ)(n)}),[n])),V=function(){var e=(0,r.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t);case 3:R((0,m.IV)({account:P,pids:[i]})),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),(0,A.x2)(e.t0.data?e.t0.data.message:e.t0.message),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=(0,r.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(t);case 3:R((0,m.IV)({account:P,pids:[i]})),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),(0,A.x2)(e.t0.data?e.t0.data.message:e.t0.message),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("button",{className:"px-4 py-3 text-center text-sm text-white bg-sky-600 rounded-lg font-medium hover:bg-blue-600 transition-all w-full md:w-auto xs:w-auto disabled:bg-opacity-40",variant:"contained",color:"primary",disabled:x,onClick:function(){N(""),Z(!0)},children:d?"Unstake":"Stake"}),(0,D.jsxs)(v.Z,{open:g,onClose:function(){Z(!1)},children:[(0,D.jsxs)(h.Z,{children:[d?"Unstake":"Stake"," ",o]}),(0,D.jsx)(b.Z,{dividers:!0,children:(0,D.jsx)(U,{tokenSymbol:t.lpSymbol,selectedToken:t.lpAddresses[w.a_.MAINNET],tokenBalance:n,onInputChange:function(e){N(e)},inputValue:S,max:n,onMax:function(){N(E)},onConfirm:d?W:V,onDismiss:function(){Z(!1)}})})]})]})},R=function(e){var t=(0,d.y8)();return{onReward:(0,u.useCallback)((0,r.Z)(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,M.sA)(t,e);case 2:case"end":return n.stop()}}),n)}))),[e,t])}},E=n(31141),V=function(e){var t=e.earnings,n=e.pid,s=e.timeStamp,i=void 0===s?0:s,o=(0,C.Z)().account,d=(0,l.TL)(),p=(0,u.useState)(!1),x=(0,a.Z)(p,2),f=x[0],v=x[1],h=R(n).onReward,b=o?(0,B.U4)(t):E.HW;return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)("button",{className:"px-4 py-3 text-center text-sm text-white bg-sky-600 rounded-lg font-medium hover:bg-blue-600 transition-all w-full md:w-auto xs:w-auto disabled:bg-opacity-40",disabled:parseFloat(i)>0||b.eq(0)||f,variant:"contained",color:"primary",onClick:(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,e.next=4,h();case 4:(0,A.KX)("Successfully Harvested UDE"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),(0,A.x2)(e.t0.data?e.t0.data.message:e.t0.message);case 10:d((0,m.IV)({account:o,pids:[n]}));case 11:case"end":return e.stop()}}),e,null,[[1,7]])}))),children:"Harvest"})})},W=n(40077),z=n(72479);function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,D.jsxs)(i.ZP,{item:!0,xs:4,children:[(0,D.jsx)("div",{variant:"caption",style:{mb:.5,color:"text.white",display:"block",fontSize:"12px"},children:t}),(0,D.jsx)("span",{variant:"subtitle1",className:"text-xs",children:e})]})}var _=function(e){var t,n=e.farm,s=e.account,p=e.lpLabel,x=(e.addLiquidityUrl,e.udePrice,(0,u.useState)(!1)),v=(0,a.Z)(x,2),h=v[0],b=v[1],w=n.pid,k=n.lpAddresses,g=n.userData||{},Z=g.allowance,y=g.tokenBalance,j=g.stakedBalance,S=g.earnings,N=g.userLast,C=(0,o.Kn)(k),A=s&&Z&&Z.isGreaterThan(0),B=(0,l.TL)(),F=(0,d.X_)(C),U=f(F).onApprove,M=(0,u.useCallback)((0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B((0,m.IV)({account:s,pids:[w]})),b(!0),e.next=5,U();case 5:B((0,m.IV)({account:s,pids:[w]})),b(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[U,B,s,w]),L=1e3*(parseFloat(N)+parseFloat(604800))-Date.now(),T=(t=1e3*(L/1e3>0?L/1e3:0),Math.floor(t/864e5)+"d "+Math.floor(t%864e5/36e5)+"h "+Math.floor(t%36e5/6e4)+"m");return(0,u.useEffect)((function(){return B((0,m.IV)({account:s,pids:[w]}))}),[B]),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"flex items-center sm:flex-row flex-col justify-between gap-4 pb-5 mb-2 border-b border-white border-opacity-10",children:[(0,D.jsx)("div",{className:"sm:col-span-1 w-full md:w-auto xs:w-auto",children:(0,D.jsx)(V,{pid:w,earnings:S})}),(0,D.jsx)("div",{className:"sm:col-span-1 w-full md:w-auto xs:w-auto",children:s?A?(0,D.jsx)(P,{farm:n,tokenBalance:y,tokenName:n.lpSymbol,pid:w,lpLabel:p}):(0,D.jsx)("button",{className:"px-4 py-3 text-center text-sm text-white bg-blue-700 rounded-lg w-full font-medium hover:bg-sky-600 transition-all",variant:"contained",disabled:h,onClick:M,children:"Approve"}):(0,D.jsx)(z.Z,{mt:"8px",width:"100%"})}),(0,D.jsx)("div",{className:"sm:col-span-1 w-full md:w-auto xs:w-auto",children:(0,D.jsx)(P,{farm:n,pid:w,tokenBalance:j,lpLabel:p,tokenName:n.lpSymbol,isUnstake:!0,isDisabled:!A||parseFloat(j)<=0})})]}),(0,D.jsxs)(i.ZP,{container:!0,sx:{pt:2,textAlign:"center"},children:[O((0,W.Ac)(j.toNumber()),"STAKED"),O((0,W.Ac)(S.toNumber(),6),"REWARDS"),O("".concat(T),"LOCKED")]})]})}},67724:function(e,t,n){n.d(t,{sA:function(){return x},AQ:function(){return d},dU:function(){return p}});var r=n(15861),a=n(87757),s=n.n(a),c=n(17144),i=n.n(c),u=n(91941),o=n(40077),l=n(70316),d=function(){var e=(0,r.Z)(s().mark((function e(t,n,r,a){var c,d,p,x,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,u.Z)(),c=new(i())(r).times(o.o3).toFormat().replaceAll(",",""),e.prev=2,0!==n){e.next=12;break}return e.next=6,t.enterStaking(c);case 6:return d=e.sent,(0,l.B)(d.wait()),e.next=10,d.wait();case 10:return p=e.sent,e.abrupt("return",p.status);case 12:return e.next=14,t.deposit(n,c);case 14:return x=e.sent,(0,l.B)(x.wait()),e.next=18,x.wait();case 18:return f=e.sent,e.abrupt("return",f.status);case 22:return e.prev=22,e.t0=e.catch(2),(0,l.x2)(e.t0.data?e.t0.data.message:e.t0.message),console.log(e.t0),e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)(s().mark((function e(t,n,r){var a,c,u,d,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new(i())(r).times(o.o3).toFormat().replaceAll(",",""),e.prev=1,0!==n){e.next=11;break}return e.next=5,t.leaveStaking(a);case 5:return c=e.sent,(0,l.B)(c.wait()),e.next=9,c.wait();case 9:return u=e.sent,e.abrupt("return",u.status);case 11:return e.next=13,t.withdraw(n,a);case 13:return d=e.sent,(0,l.B)(d.wait()),e.next=17,d.wait();case 17:return p=e.sent,e.abrupt("return",p.status);case 21:return e.prev=21,e.t0=e.catch(1),(0,l.x2)(e.t0.data?e.t0.data.message:e.t0.message),e.abrupt("return",null);case 25:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t,n,r){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.Z)(s().mark((function e(t,n){var r,a,c,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,u.Z)(),e.prev=1,0!==n){e.next=11;break}return e.next=5,t.enterStaking("0");case 5:return r=e.sent,(0,l.B)(r.wait()),e.next=9,r.wait();case 9:return a=e.sent,e.abrupt("return",a.status);case 11:return e.next=13,t.deposit(n,"0");case 13:return c=e.sent,(0,l.B)(c.wait()),e.next=17,c.wait();case 17:return i=e.sent,e.abrupt("return",i.status);case 21:return e.prev=21,e.t0=e.catch(1),(0,l.x2)(e.t0.data?e.t0.data.message:e.t0.message),e.abrupt("return",null);case 25:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t,n){return e.apply(this,arguments)}}();n(60361),n(89848),n(6751),n(90279)},91941:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(54385),a=n(42982),s=n(8785),c=n(55708),i=(n(16030),n(92635)),u=n(12859),o=n(52752),l=n(37419),d=n(41453),p=n(47231),x=n(39616),f=n(65395),m=n(10119),v=n(99823),h=["user","transactions","lists","profile"],b=(0,s.xC)({devTools:!1,reducer:{block:o.ZP,farms:i.ZP,pools:u.ZP,user:d.Z,transactions:p.Z,swap:x.Z,burn:m.Z,multicall:v.Z,lists:f.Z},middleware:[].concat((0,a.Z)((0,s.Bx)({thunk:!0})),[(0,c.a1)({states:h})]),preloadedState:(0,c.zD)({states:h})});b.dispatch((0,l.S)());var w=b,k=n(23224),g=function(){var e=w.getState().user.gasPrice||k.j4.default;return"97"===r.a_.MAINNET.toString()?e:k.j4.testnet}}}]);
//# sourceMappingURL=323.ebd09ed5.chunk.js.map